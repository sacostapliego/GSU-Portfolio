<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Santa's Adaptive Christmas Fifteen Puzzle</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<!-- Background Christmas Music (Loops Continuously) -->
<audio id="bg-music" loop>
    <source src="assets/christmas.mp3" type="audio/mpeg">
    <source src="assets/christmas.wav" type="audio/wav">
    <source src="assets/christmas.ogg" type="audio/ogg">
</audio>

<!-- Music Control Button and Volume Slider -->
<div class="music-controls">
    <button id="music-toggle" class="music-btn" title="Toggle Music">ğŸ”Š</button>
    <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="15" title="Volume Control">
</div>
<header>
    <div class="snowfall"></div>
    <h1>ğŸ… Santa's Adaptive Christmas Fifteen Puzzle ğŸ„</h1>
    <nav>
        <a href="index_demo.html">ğŸ  Home</a> |
        <a href="game_demo.html">ğŸ® Play</a>
        <button id="theme-toggle" style="float:right;margin-left:2em;">ğŸŒ™ Switch Theme</button>
    </nav>
</header>
<main>
    <h1>â„ï¸ Welcome to Santa's Workshop! â„ï¸</h1>
    <p>ğŸ Challenge yourself with this festive sliding puzzle game. Register, log in, or jump straight into play mode! ğŸ</p>
    <div class="decoration">ğŸ„ â›„ ğŸ„ â›„ ğŸ„</div>
    <a href="game_demo.html" class="start-btn">ğŸš€ Start Game ğŸš€</a>
    <div class="decoration">ğŸ”” ğŸ… ğŸ¦Œ ğŸ… ğŸ””</div>
</main>
<footer>
    <p>&copy; 2025 Santa's Workshop. All rights reserved.</p>
</footer>
</body>
<script>
// Theme toggle logic
document.addEventListener('DOMContentLoaded', function() {
    const btn = document.getElementById('theme-toggle');
    function setTheme(theme) {
        document.body.classList.toggle('theme-dark', theme === 'dark');
        localStorage.setItem('theme', theme);
    }
    const saved = localStorage.getItem('theme') || 'light';
    setTheme(saved);
    btn.textContent = saved === 'dark' ? 'â˜€ï¸ Light Theme' : 'ğŸŒ™ Switch Theme';
    btn.onclick = function() {
        const newTheme = document.body.classList.contains('theme-dark') ? 'light' : 'dark';
        setTheme(newTheme);
        btn.textContent = newTheme === 'dark' ? 'â˜€ï¸ Light Theme' : 'ğŸŒ™ Switch Theme';
    };
});

// Background Music Control
document.addEventListener('DOMContentLoaded', function() {
    const bgMusic = document.getElementById('bg-music');
    const musicToggle = document.getElementById('music-toggle');
    const volumeSlider = document.getElementById('volume-slider');
    
    // Try to autoplay music
    bgMusic.volume = 0.15; // Set volume to 15% (quieter background music)
    bgMusic.play().catch(() => {
        // If autoplay fails, music will start on user interaction
        console.log('Autoplay prevented. Music will start on user click.');
    });
    
    // Update music button text
    musicToggle.textContent = 'ğŸ”Š';
    
    // Toggle music on/off
    musicToggle.onclick = function() {
        if (bgMusic.paused) {
            bgMusic.play();
            musicToggle.textContent = 'ğŸ”Š';
        } else {
            bgMusic.pause();
            musicToggle.textContent = 'ğŸ”‡';
        }
    };
    
    // Volume slider control
    volumeSlider.oninput = function() {
        bgMusic.volume = this.value / 100;
        localStorage.setItem('musicVolume', this.value);
    };
    
    // Load user's music volume preference
    const savedVolume = localStorage.getItem('musicVolume');
    if (savedVolume) {
        volumeSlider.value = savedVolume;
        bgMusic.volume = savedVolume / 100;
    }
    
    // Load music play/pause preference
    if (localStorage.getItem('musicEnabled') === 'false') {
        bgMusic.pause();
        musicToggle.textContent = 'ğŸ”‡';
    }
    
    // Save music state when toggled
    musicToggle.addEventListener('click', function() {
        localStorage.setItem('musicEnabled', !bgMusic.paused);
    });
});
</script>
</html>
